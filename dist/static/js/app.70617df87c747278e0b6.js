webpackJsonp([0],{"23tK":function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("7+uW"),s={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("router-link",{attrs:{to:"/"}},[this._v("首页")]),this._v(" "),n("router-link",{attrs:{to:"/car"}},[this._v("购物车")]),this._v(" "),n("router-view")],1)},staticRenderFns:[]};var r=e("VU/8")({name:"App"},s,!1,function(t){e("23tK")},null,null).exports,i=e("/ocq"),a={name:"List",methods:{add:function(t){fetch("/add/"+t).then(function(t){return t.text()}).then(function(t){"ok"==t&&alert("选购成功!")})}},props:["datas"]},c={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h1",{staticClass:"title"},[t._v(t._s(t.datas.name))]),t._v(" "),e("img",{attrs:{src:"static/img/djhy3.png"}}),t._v(" "),e("div",{staticClass:"text"},[e("span",{staticClass:"price"},[e("em",{staticStyle:{"font-size":"30px","margin-right":"2px"}},[t._v(t._s(t.datas.price))]),t._v("¥")]),t._v(" "),e("div",{staticClass:"carIco",on:{click:function(n){t.add(t.datas.id)}}},[t._v("加入购物车")])])])},staticRenderFns:[]};var u={data:function(){return{datas:[{name:"衣服",src:"goods1.jpg",price:"100"},{name:"裤子",src:"goods1.jpg",price:"80"}]}},mounted:function(){fetch("/selectGoods").then(function(t){return t.json()}).then(function(t){this.datas=t}.bind(this))},components:{list:e("VU/8")(a,c,!1,function(t){e("gBro")},"data-v-5fd88d5c",null).exports}},d={render:function(){var t=this.$createElement,n=this._self._c||t;return n("ul",{staticClass:"xz"},this._l(this.datas,function(t){return n("li",[n("list",{attrs:{datas:t}})],1)}))},staticRenderFns:[]};var l=e("VU/8")(u,d,!1,function(t){e("nAlH")},null,null).exports,p={name:"car",data:function(){return{goods:[{cid:1,name:"衣服",price:100,num:1}]}},methods:{sc:function(t){var n=this;fetch("/del",{method:"post",body:"id="+t,headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){return t.text()}).then(function(e){"ok"==e&&(n.goods=n.goods.filter(function(n){if(n.cid!=t)return n.id}))})},add:function(t){fetch("/update/"+t.cid+"/"+(t.num+1)).then(function(t){return t.text()}).then(function(n){"ok"==n&&t.num++})},del:function(t){1!=t.num&&fetch("/update/"+t.cid+"/"+(t.num-1)).then(function(t){return t.text()}).then(function(n){"ok"==n&&t.num--})},check:function(t){var n=0;n=!parseFloat(t.num)&&t.num?1:parseFloat(t.num)||"",fetch("/update/"+t.cid+"/"+n).then(function(t){return t.text()}).then(function(e){"ok"==e&&(t.num=n)})}},computed:{nums:function(){var t=0;return this.goods.forEach(function(n){t+=parseFloat(n.num||0)}),t},prices:function(){var t=0;return this.goods.forEach(function(n){t+=parseFloat(n.num*n.price)}),t}},mounted:function(){var t=new XMLHttpRequest;t.open("GET","/find"),t.send(),t.onload=function(){var n=JSON.parse(t.response);this.goods=n}.bind(this)}},f={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("table",{staticClass:"table table-bordered"},[e("caption",[t._v("购物车")]),t._v(" "),e("tbody",[t._m(0),e("tr"),0==t.goods.length?e("tr",[e("td",{attrs:{colspan:"6"}},[t._v("没有商品")])]):t._e(),t._v(" "),t._l(t.goods,function(n,o){return e("tr",[e("td",{domProps:{textContent:t._s(n.cid)}}),t._v(" "),e("td",{domProps:{textContent:t._s(n.name)}}),t._v(" "),e("td",{domProps:{textContent:t._s(n.price)}}),t._v(" "),e("td",{staticStyle:{width:"250px"}},[e("div",{staticClass:"form-group",staticStyle:{width:"200px",margin:"auto"}},[e("button",{staticClass:"btn btn-default",on:{click:function(e){t.del(n)}}},[t._v("-")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.num,expression:"item.num"}],staticClass:"form-control",staticStyle:{width:"100px",display:"inline-block"},attrs:{type:"text",placeholder:"Search"},domProps:{value:n.num},on:{keyup:function(e){t.check(n)},input:function(e){e.target.composing||t.$set(n,"num",e.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-default",on:{click:function(e){t.add(n)}}},[t._v("+")])])]),t._v(" "),e("td",{domProps:{textContent:t._s(n.num*n.price)}}),t._v(" "),e("td",[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){t.sc(n.cid)}}},[t._v("删除")])])])}),t._v(" "),e("tr",[e("td",[t._v("总数量")]),t._v(" "),e("td",{attrs:{colspan:"2"},domProps:{textContent:t._s(t.nums)}}),t._v(" "),e("td",[t._v("总价格")]),t._v(" "),e("td",{attrs:{colspan:"2"},domProps:{textContent:t._s(t.prices)}})])],2)])])},staticRenderFns:[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("tr",[e("th",[t._v("编号")]),t._v(" "),e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("单价")]),t._v(" "),e("th",[t._v("数量")]),t._v(" "),e("th",[t._v("价格")]),t._v(" "),e("th",[t._v("操作")])])}]};var v=e("VU/8")(p,f,!1,function(t){e("nmdr")},null,null).exports;o.a.use(i.a);var m=new i.a({routes:[{path:"/",component:l},{path:"/car",component:v}]});o.a.config.productionTip=!1,new o.a({el:"#app",router:m,components:{App:r},template:"<App/>"})},gBro:function(t,n){},nAlH:function(t,n){},nmdr:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.70617df87c747278e0b6.js.map